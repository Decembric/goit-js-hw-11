{"version":3,"file":"commonHelpers.js","sources":["../src/js/pixabay-api.js"],"sourcesContent":["import SimpleLightbox from \"simplelightbox\";\nimport \"simplelightbox/dist/simple-lightbox.min.css\";\nimport iziToast from \"izitoast\";\nimport \"izitoast/dist/css/iziToast.min.css\";\n\n\n\nconst API_KEY = '42373349-27b23dee84583d41aca0b8d31';\n\nconst inputQueryRef = document.querySelector('input')\nconst submitButtonRef = document.querySelector('button')\nconst hitsContainer = document.querySelector('.gallery')\nconst loaderRef = document.querySelector('.loader')\nconst formRef = document.querySelector('form')\n\nformRef.addEventListener('submit', onInputQuery)\n\nonHideLoaderText()\nfunction onShowLoaderText() {\n    loaderRef.style.display = 'block';\n    \n}\n\nfunction onHideLoaderText() {\n    loaderRef.style.display = 'none';\n}\n\nconst lightbox = new SimpleLightbox('.gallery a', {\n  captionDelay: 250,\n  captionsData: 'alt',\n  enableKeyboard: true,\n});\n\n\nfunction onInputQuery(evt) {\n  evt.preventDefault()\nconst query = inputQueryRef.value.trim()\n  if (query === '') {\n    hitsContainer.innerHTML = \"\";\n    iziToast.show({\n      title: 'Error',\n      message: 'Please, enter a non-blank line',\n      titleSize: '16px',\n      titleLineHeight: '150%',\n      messageSize: '16px',\n      messageLineHeight: '150%',\n      backgroundColor: '#ef4040',\n      position: 'bottomRight',\n    })\n    return\n  } else {\n    \n    getPicture(query)\n  }\n  inputQueryRef.value = \"\"\n}\n\nconsole.log(inputQueryRef)\nconsole.log(submitButtonRef)\n\nfunction getPicture(query) {\n  onShowLoaderText()\n  const urlAPI = `https://pixabay.com/api/?key=${API_KEY}&q=${query}&image_type=photo&orientation=horizontal&safesearch=true`\n  fetch(urlAPI).then(res => {\n    if (!res.ok) {\n    throw new Error(res.status)\n    }\n    return res.json()\n  }).then(({ hits, totalHits\n }) => {\n    if (totalHits !== 0) {\n      render(hits) \n      onHideLoaderText()\n    } else {\n      hitsContainer.innerHTML = \"\"\niziToast.show({\n      title: 'Error',\n      message: 'Sorry, there are no images matching your search query. Please try again!',\n      titleSize: '16px',\n      titleLineHeight: '150%',\n      messageSize: '16px',\n      messageLineHeight: '150%',\n      backgroundColor: '#ef4040',\n      position: 'bottomRight',\n    })\n    }\n  }).catch(error => \n    console.error(error)).finally()  \n  \n}\n\nfunction render(hits) {\n  hitsContainer.innerHTML = '';\n const hitsRef = hits.map(({ webformatURL, largeImageURL, tags, likes, views, comments, downloads }) => {\n    return `<div class=\"gallery\">\n            <ul>\n        <li><a href=\"${largeImageURL}\"><img src=\"${webformatURL}\" alt=\"${tags}\"/></a></li>\n          <li><p>Likes ${likes}</p></li>\n          <li>\n            <p>Views ${views}</p>\n          </li>\n          <li><p>Comments ${comments}</p></li>\n          <li><p>Downloads ${downloads}</p></li>\n        </ul>\n        </div>`\n    })\n  hitsContainer.insertAdjacentHTML('beforeend', hitsRef.join(''))\n  lightbox.refresh()\n}\n\n"],"names":["API_KEY","inputQueryRef","submitButtonRef","hitsContainer","loaderRef","formRef","onInputQuery","onHideLoaderText","onShowLoaderText","lightbox","SimpleLightbox","evt","query","iziToast","getPicture","urlAPI","res","hits","totalHits","render","error","hitsRef","webformatURL","largeImageURL","tags","likes","views","comments","downloads"],"mappings":"6vBAOA,MAAMA,EAAU,qCAEVC,EAAgB,SAAS,cAAc,OAAO,EAC9CC,EAAkB,SAAS,cAAc,QAAQ,EACjDC,EAAgB,SAAS,cAAc,UAAU,EACjDC,EAAY,SAAS,cAAc,SAAS,EAC5CC,EAAU,SAAS,cAAc,MAAM,EAE7CA,EAAQ,iBAAiB,SAAUC,CAAY,EAE/CC,EAAkB,EAClB,SAASC,GAAmB,CACxBJ,EAAU,MAAM,QAAU,OAE9B,CAEA,SAASG,GAAmB,CACxBH,EAAU,MAAM,QAAU,MAC9B,CAEA,MAAMK,EAAW,IAAIC,EAAe,aAAc,CAChD,aAAc,IACd,aAAc,MACd,eAAgB,EAClB,CAAC,EAGD,SAASJ,EAAaK,EAAK,CACzBA,EAAI,eAAgB,EACtB,MAAMC,EAAQX,EAAc,MAAM,KAAM,EACtC,GAAIW,IAAU,GAAI,CAChBT,EAAc,UAAY,GAC1BU,EAAS,KAAK,CACZ,MAAO,QACP,QAAS,iCACT,UAAW,OACX,gBAAiB,OACjB,YAAa,OACb,kBAAmB,OACnB,gBAAiB,UACjB,SAAU,aAChB,CAAK,EACD,MACJ,MAEIC,EAAWF,CAAK,EAElBX,EAAc,MAAQ,EACxB,CAEA,QAAQ,IAAIA,CAAa,EACzB,QAAQ,IAAIC,CAAe,EAE3B,SAASY,EAAWF,EAAO,CACzBJ,EAAkB,EAClB,MAAMO,EAAS,gCAAgCf,CAAO,MAAMY,CAAK,2DACjE,MAAMG,CAAM,EAAE,KAAKC,GAAO,CACxB,GAAI,CAACA,EAAI,GACT,MAAM,IAAI,MAAMA,EAAI,MAAM,EAE1B,OAAOA,EAAI,KAAM,CAClB,CAAA,EAAE,KAAK,CAAC,CAAE,KAAAC,EAAM,UAAAC,CACnB,IAAO,CACCA,IAAc,GAChBC,EAAOF,CAAI,EACXV,EAAkB,IAElBJ,EAAc,UAAY,GAChCU,EAAS,KAAK,CACR,MAAO,QACP,QAAS,2EACT,UAAW,OACX,gBAAiB,OACjB,YAAa,OACb,kBAAmB,OACnB,gBAAiB,UACjB,SAAU,aAChB,CAAK,EAEL,CAAG,EAAE,MAAMO,GACP,QAAQ,MAAMA,CAAK,CAAC,EAAE,QAAS,CAEnC,CAEA,SAASD,EAAOF,EAAM,CACpBd,EAAc,UAAY,GAC3B,MAAMkB,EAAUJ,EAAK,IAAI,CAAC,CAAE,aAAAK,EAAc,cAAAC,EAAe,KAAAC,EAAM,MAAAC,EAAO,MAAAC,EAAO,SAAAC,EAAU,UAAAC,CAAS,IACtF;AAAA;AAAA,uBAEYL,CAAa,eAAeD,CAAY,UAAUE,CAAI;AAAA,yBACpDC,CAAK;AAAA;AAAA,uBAEPC,CAAK;AAAA;AAAA,4BAEAC,CAAQ;AAAA,6BACPC,CAAS;AAAA;AAAA,eAGjC,EACHzB,EAAc,mBAAmB,YAAakB,EAAQ,KAAK,EAAE,CAAC,EAC9DZ,EAAS,QAAS,CACpB"}